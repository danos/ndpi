Description: Honour cppflags too
Author: Gianfranco Costamagna <locutusofborg@debian.org>
---
 example/Makefile.in | 6 +++---
 src/lib/Makefile.in | 4 ++--
 2 files changed, 5 insertions(+), 5 deletions(-)

--- a/example/Makefile.in
+++ b/example/Makefile.in
@@ -25,13 +25,13 @@
 	ar rsv libndpiReader.a $(COMMON_SOURCES:%.c=%.o)
 
 ndpiReader: libndpiReader.a $(LIBNDPI) ndpiReader.o
-	$(CC) $(CFLAGS) ndpiReader.o libndpiReader.a -o $@ $(LDFLAGS)
+	$(CC) $(CPPFLAGS) $(CFLAGS) ndpiReader.o libndpiReader.a -o $@ $(LDFLAGS)
 
 ndpiSimpleIntegration: ndpiSimpleIntegration.o
-	$(CC) $(CFLAGS) $< -o $@ $(LDFLAGS)
+	$(CC) $(CPPFLAGS) $(CFLAGS) $< -o $@ $(LDFLAGS)
 
 %.o: %.c $(HEADERS) Makefile
-	$(CC) $(CFLAGS) -c $< -o $@
+	$(CC) $(CPPFLAGS) $(CFLAGS) -c $< -o $@
 
 install: ndpiReader
 	mkdir -p $(DESTDIR)$(PREFIX)/bin/
--- a/src/lib/Makefile.in
+++ b/src/lib/Makefile.in
@@ -53,12 +53,12 @@
 	   $(RANLIB) $@      
 
 $(NDPI_LIB_SHARED): $(OBJECTS)
-	$(CC) -shared -fPIC $(SONAME_FLAG) -o $@ $(OBJECTS) $(LDFLAGS)
+	$(CC) $(CFLAGS) $(CPPFLAGS) $(LDFLAGS) -shared -fPIC $(SONAME_FLAG) -o $@ $(OBJECTS)
 	ln -fs $(NDPI_LIB_SHARED) $(NDPI_LIB_SHARED_BASE)
 	ln -fs $(NDPI_LIB_SHARED) $(NDPI_LIB_SHARED_BASE).$(NDPI_VERSION_MAJOR).$(NDPI_VERSION_MINOR)
 
 %.o: %.c $(HEADERS) Makefile
-	$(CC) $(CFLAGS) -c $< -o $@
+	$(CC) $(CPPFLAGS) $(CFLAGS) -c $< -o $@
 
 clean:
 	/bin/rm -f $(NDPI_LIB_STATIC) $(OBJECTS) *.o *.so *.lo libndpi.so*
