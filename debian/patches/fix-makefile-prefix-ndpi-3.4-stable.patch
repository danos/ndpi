From d68a23f6f1ac364267e9feb38d1c93ab2fbd86b0 Mon Sep 17 00:00:00 2001
From: Subhajit Chatterjee <subhajit.chatterjee@cdot.in>
Date: Fri, 6 Nov 2020 06:25:07 +0000
Subject: [PATCH] fix makefile prefix changes for ndpi-3.4 (stable)

---
 configure.seed      | 4 ++--
 src/lib/Makefile.in | 2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/configure.seed b/configure.seed
index b333110..abe252d 100644
--- a/configure.seed
+++ b/configure.seed
@@ -5,7 +5,7 @@ AC_CONFIG_MACRO_DIR([m4])
 
 AM_INIT_AUTOMAKE([foreign subdir-objects])
 
-EXTRA_TARGETS="example tests tests/unit"
+EXTRA_TARGETS="generation example tests tests/unit"
 AC_ARG_WITH(only-libndpi,  AS_HELP_STRING([--with-only-libndpi], [Build only libndpi (no examples, tests etc)]))
 AS_IF([test "${with_only_libndpi+set}" = set],[
   EXTRA_TARGETS=""
@@ -195,7 +195,7 @@ if test "${with_pcre+set}" = set; then :
 fi
 
 
-AC_CONFIG_FILES([Makefile example/Makefile example/Makefile.dpdk tests/Makefile tests/unit/Makefile libndpi.pc src/include/ndpi_define.h src/lib/Makefile python/Makefile fuzz/Makefile src/include/ndpi_api.h])
+AC_CONFIG_FILES([Makefile generation/Makefile example/Makefile example/Makefile.dpdk tests/Makefile tests/unit/Makefile libndpi.pc src/include/ndpi_define.h src/lib/Makefile python/Makefile fuzz/Makefile src/include/ndpi_api.h])
 AC_CONFIG_HEADERS(src/include/ndpi_config.h)
 AC_SUBST(GIT_RELEASE)
 AC_SUBST(NDPI_MAJOR)
diff --git a/src/lib/Makefile.in b/src/lib/Makefile.in
index 6c69485..e847c14 100644
--- a/src/lib/Makefile.in
+++ b/src/lib/Makefile.in
@@ -11,7 +11,7 @@
 # Installation directories
 #
 prefix     = @prefix@
-libdir     = ${prefix}/lib
+libdir     = ${prefix}/lib/$(DEB_TARGET_MULTIARCH)
 includedir = ${prefix}/include/ndpi
 CC         = @CC@
 CFLAGS     += -fPIC -DPIC -I../include -Ithird_party/include -DNDPI_LIB_COMPILATION -Wall @CFLAGS@ @CUSTOM_NDPI@
-- 
2.20.1

